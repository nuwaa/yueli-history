{{ define "main" }}
<main class="page single cute-article">
  <nav class="cute-nav">
    <a href="/">🏠 ホーム</a>
    <a href="/questions/">❓ 質問一覧</a>
  </nav>

  <h1 class="page-title">質問一覧</h1>

  <!-- ✅ 質問件数の表示 -->
  {{ $questions := .Pages }}
  <p style="text-align: center; font-weight: bold; color: #cc3388;">
    現在の質問件数：{{ len $questions }}件
  </p>

  <div style="text-align:center;">
    <input type="text" id="searchInput" placeholder="キーワードで検索">
  </div>

  <div class="question-cards">
    {{ range .Pages.ByDate.Reverse }}
      <div class="card">
        <h3><a href="{{ .RelPermalink }}">{{ .Title }}</a></h3>
        <p class="date">{{ .Date.Format "2006年01月02日" }}</p>
        <p>{{ .Plain | truncate 80 }}</p>
        <a href="{{ .RelPermalink }}">続きを読む →</a>
      </div>
    {{ end }}
  </div>

  <footer style="text-align:center;">© 2025 月璃(Yueli) 🌙</footer>

  <script>
    const searchInput = document.getElementById("searchInput");
    const cards = document.querySelectorAll(".card");
    searchInput.addEventListener("input", function () {
      const keyword = this.value.toLowerCase();
      cards.forEach(card => {
        const text = card.textContent.toLowerCase();
        card.style.display = text.includes(keyword) ? "block" : "none";
      });
    });
  </script>
</main>
{{ end }}
